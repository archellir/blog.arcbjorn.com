# Repository Guidelines

## Project Structure & Module Organization
- `routes/` Fresh routes (`index.tsx`, `[id].tsx`, API endpoints). Prefer nested routes as folders with `index.tsx`.
- `components/` Preact components (PascalCase.tsx). `islands/` interactive islands only.
- `api/` server-side data helpers (e.g., `listPosts.ts`, `loadPost.ts`).
- `data/posts/` Markdown sources with front matter. `static/` public assets.
- `assets/` CSS entry for Tailwind v4; bundled via Vite from `client.ts`.
- `_fresh/` is generated by `vite build` — do not edit.
- `tests/` Deno tests. Other shared code in `utils/`, `types.ts`.

## Build, Test, and Development Commands
- `deno task dev` — run locally with Vite (HMR).
- `deno task build` — build server and assets into `_fresh/`.
- `deno task start` — start the production server.
- `deno task test` — run Deno tests.
- `deno task check` — format check, lint, and type-check.
- `deno task update` — update Fresh and dependencies.

## Coding Style & Naming Conventions
- Language: TypeScript (TS/TSX). Avoid `any`; prefer explicit types.
- Formatting: `deno fmt`; Linting: `deno lint` (configured via `deno.json`).
- Files: components in PascalCase (`BlogLayout.tsx`); routes use path-style names (`sitemap.xml.ts`, `[id].tsx`).
- Symbols: camelCase for functions/vars; UPPER_SNAKE_CASE for constants; hooks as `useX`.
- Imports: use `fresh` (core) and `fresh/runtime` for `Head`; `$std/` and npm deps via `deno.json`.

## Testing Guidelines
- Framework: Deno test with `$std/testing` asserts and BDD (`describe`, `it`).
- Location: `tests/` or colocated as `*_test.ts`.
- Scope: cover `api/` helpers and route handlers (happy paths + error cases).
- Run: `deno task test` and ensure `deno task check` passes before pushing.

## Commit & Pull Request Guidelines
- Conventional Commits; one focused change per commit; subject ≤ 50 chars.
  - Examples: `feat: paginate posts on index`, `fix: handle missing post file`.
- PRs: clear description, linked issues, before/after screenshots for UI changes, and notes on tests/coverage. Avoid unrelated refactors.

## Security & Configuration Tips
- Environment: `.env` is loaded via `$std/dotenv/load.ts` — never commit secrets.
- Static caching is configured in `main.ts`; keep cache headers in mind for new assets.
- Do not modify generated `_fresh/` output; regenerate via `deno task build`/`update`.
